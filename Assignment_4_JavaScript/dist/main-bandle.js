!function(n){var i={};function o(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=n,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/",o(o.s=2)}([function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}e.exports=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}},function(e,t,n){e.exports=n(3)},function(e,t,n){n(4),n(5),n(6),n(13),n(7),n(8),n(9),n(10),n(11),n(12)},function(e,t,n){},function(e,t,n){e.exports=n.p+"index.html"},function(e,t,n){e.exports=n.p+"images/favicon.ico"},function(e,t,n){e.exports=n.p+"images/emptyTile.png"},function(e,t,n){e.exports=n.p+"images/wall.png"},function(e,t,n){e.exports=n.p+"images/box.png"},function(e,t,n){e.exports=n.p+"images/correct_box.png"},function(e,t,n){e.exports=n.p+"images/player.png"},function(e,t,n){e.exports=n.p+"images/goal.png"},function(e,t,n){"use strict";n.r(t);var i=n(0),o=n.n(i),r=n(1),s=n.n(r),a=[{name:"Orginal",mapGrid:[[[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "]],[[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "]],[[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "]],[[" "],[" "],[" "],[" "],["W"],["W"],["W"],["W"],["W"],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "]],[[" "],[" "],[" "],[" "],["W"],[" "],[" "],[" "],["W"],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "]],[[" "],[" "],[" "],[" "],["W"],["B"],[" "],[" "],["W"],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "]],[[" "],[" "],["W"],["W"],["W"],[" "],[" "],["B"],["W"],["W"],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "]],[[" "],[" "],["W"],[" "],[" "],["B"],[" "],["B"],[" "],["W"],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "]],[["W"],["W"],["W"],[" "],["W"],[" "],["W"],["W"],[" "],["W"],[" "],[" "],[" "],["W"],["W"],["W"],["W"],["W"],["W"]],[["W"],[" "],[" "],[" "],["W"],[" "],["W"],["W"],[" "],["W"],["W"],["W"],["W"],["W"],[" "],[" "],["G"],["G"],["W"]],[["W"],[" "],["B"],[" "],[" "],["B"],[" "],[" "],[" "],[" "],[" "],["P"],[" "],[" "],[" "],[" "],["G"],["G"],["W"]],[["W"],["W"],["W"],["W"],["W"],[" "],["W"],["W"],["W"],[" "],["W"],[" "],["W"],["W"],[" "],[" "],["G"],["G"],["W"]],[[" "],[" "],[" "],[" "],["W"],[" "],[" "],[" "],[" "],[" "],["W"],["W"],["W"],["W"],["W"],["W"],["W"],["W"],["W"]],[[" "],[" "],[" "],[" "],["W"],["W"],["W"],["W"],["W"],["W"],["W"],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "]],[[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "]],[[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "]]]},{name:"Try It",mapGrid:[[["W"],["W"],[" "],[" "],[" "],[" "],[" "],[" "],[" "]],[["W"],[" "],[" "],["W"],["W"],[" "],[" "],[" "],[" "]],[[" "],["B"],[" "],["G"],[" "],[" "],[" "],[" "],[" "]],[[" "],[" "],[" "],["G"],[" "],[" "],[" "],[" "],[" "]],[["W"],[" "],["P"],["G"],[" "],[" "],[" "],[" "],[" "]],[["W"],[" "],["W"],["W"],["W"],[" "],[" "],["B"],[" "]],[[" "],["B"],[" "],[" "],[" "],[" "],[" "],[" "],[" "]],[[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "],[" "]]]},{name:"Is it imposible!",mapGrid:[[[" "],["P"],[" "],[" "],[" "]],[[" "],[" "],[" "],["B"],[" "]],[[" "],[" "],[" "],[" "],[" "]],[[" "],["B"],[" "],[" "],[" "]],[["G"],[" "],["G"],[" "],[" "]]]}],u=Symbol(),l=Symbol(),h=Symbol(),c=Symbol(),m=Symbol(),d=Symbol(),v=function(){function i(e,t,n){o()(this,i),this.row=t,this.column=n,this[l]=" ",this[h](e)}return s()(i,[{key:h,value:function(e){this.hostType="G"===e?(this[m]="G"," "):"W"===e?this[m]="W":"B"===e?(this[m]=" ","B"):"P"===e?(this[m]=" ","P"):this[m]=" "}},{key:d,value:function(){switch(" "!==this[c]?this[c]:this[m]){case"W":this[u]="wall.png";break;case"B":this[u]="G"===this[m]?"correct_box.png":"box.png";break;case"P":this[u]="player.png";break;case"G":this[u]="goal.png";break;default:this[u]="emptyTile.png"}}},{key:"type",get:function(){return this[m]}},{key:"hostType",set:function(e){this[c]=e,this[d]()},get:function(){return this[c]}},{key:"tileImage",get:function(){return this[u]}},{key:"canContainHost",get:function(){return" "===this[c]}}]),i}(),f=function(){function t(e){o()(this,t),this.name=e,this.handlers=[]}return s()(t,[{key:"registerHandler",value:function(e){this.handlers.push(e)}}]),t}(),y={},g=function(){function e(){o()(this,e)}return s()(e,null,[{key:"registerEvent",value:function(e){var t=new f(e);this.events[e]=t}},{key:"addEventListener",value:function(e,t){this.events[e].registerHandler(t)}},{key:"dispatchEvent",value:function(e){this.events[e].handlers.forEach(function(e){e()})}},{key:"events",get:function(){return y}}]),e}(),p=Symbol(),W=Symbol(),b=Symbol(),E=Symbol(),k=Symbol(),x=Symbol(),S=Symbol(),M=Symbol(),G=Symbol(),w=Symbol(),C=Symbol(),T=function(){function i(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;o()(this,i),this[p]=this[W](e),this[b]=this[p].length,this[E]=this[p][0].length,this[k]=Math.min(t,n),this[x]=this[S](),this[C]=new f("gameEndEvent"),g.events.gameEndEvent=this[C]}return s()(i,[{key:W,value:function(e){var t=[];this[w]=[];for(var n=0;n<e.length;n++){for(var i=[],o=0;o<e[n].length;o++){var r=new v(e[n][o][0],n,o);"P"===e[n][o][0]?(this[M]=n,this[G]=o):"G"===e[n][o][0]&&this[w].push(r),i.push(r)}t.push(i)}return t}},{key:S,value:function(){var e=Math.max(this[b],this[E]);return this[k]/e/this[k]*100}},{key:"updateTileGridDimension",value:function(e,t){this[k]=Math.min(e,t)}},{key:"buildMovement",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this[M],i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:this[G],o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:[],r=n+e,s=i+t;if(r<0||r>=this[p].length||s<0||s>=this[p][r].length)return[];var a=this[p][n][i],u=this[p][r][s];return"W"===u.type?[]:"B"===a.hostType&&"B"===u.hostType?[]:" "===u.type&&!0===u.canContainHost?(o.push(a),o.push(u),o):"G"===u.type&&!0===u.canContainHost?(o.push(a),o.push(u),o):(o.push(a),this.buildMovement(e,t,r,s,o))}},{key:"applyMovement",value:function(e){" "!==e[0].hostType&&e.reverse();for(var t=0;t<e.length-1;t++){var n=e[t],i=e[t+1],o=i.hostType;i.hostType=n.hostType,n.hostType=o}var r=e.filter(function(e){return"P"===e.hostType})[0];this[M]=r.row,this[G]=r.column}},{key:"tiles",get:function(){return this[p]}},{key:"tileGridDimension",get:function(){return this[k]}},{key:"tileDimensionInPrecent",get:function(){return this[x]}},{key:"isGameEnd",get:function(){return 0===this[w].filter(function(e){return"B"!==e.hostType}).length}}]),i}(),I=Symbol(),B=Symbol(),P=Symbol(),L=function(){function n(e){var t=this;o()(this,n),this[P]=e,g.addEventListener("gameEndEvent",function(){t[I].style.borderColor="#008000"})}return s()(n,[{key:"createTileMap",value:function(){for(var e=document.createElement("table"),t=0;t<this[P].tiles.length;t++){for(var n=document.createElement("tr"),i=0;i<this[P].tiles[t].length;i++){var o=document.createElement("td"),r=document.createElement("img");r.src="./images/".concat(this[P].tiles[t][i].tileImage),o.style.width=this[P].tileDimensionInPrecent+"%",o.style.height=this[P].tileDimensionInPrecent+"%",o.appendChild(r),n.appendChild(o)}e.appendChild(n)}return e.style.border="2px solid #FFC107",this[I]=e,this[I]}},{key:"updateTiles",value:function(e){var t=this;e.forEach(function(e){t[B](e)})}},{key:B,value:function(e){this[I].rows[e.row].cells.item(e.column).firstChild.src="./images/".concat(e.tileImage)}}]),n}(),D=Symbol(),H=Symbol(),_=Symbol(),O=Symbol(),j=Symbol(),R=Symbol(),A=Symbol(),F=Symbol(),N=Symbol(),q=Symbol(),z=Symbol(),J=function(){function e(){o()(this,e),this[D]=[],this[H]=0,this[O]=0,this[_]=0,this[F]=0,this[R]=!1,this[q]=new f("timeChangeEvent"),g.events.timeChangeEvent=this[q],this[z]=new f("indexMoveChangeEvent"),g.events.indexMoveChangeEvent=this[z]}return s()(e,[{key:N,value:function(){this[F]+=1,60<=this[F]&&(this[F]=0,this[_minutes]+=1),this[_seconds]=this[F]}},{key:"stopTimer",value:function(){this[R]=!1,clearInterval(this[j]),g.dispatchEvent("timeChangeEvent")}},{key:A,value:function(){var e=this;!0!==this[R]&&(this[R]=!0,this[j]=setInterval(function(){e[F]+=1,g.dispatchEvent("timeChangeEvent")},1e3))}},{key:"canPlay",value:function(e){var t=e+this.indexMove;return 0<t&&t<this.maxMoveCount}},{key:"saveMove",value:function(e){this[A](),this[D]=this[D].slice(0,this[_]),this[D].push(e),this.indexMove+=1}},{key:"getMove",value:function(e){var t=this[_]+e;t<0?t=0:t>this.maxMoveCount&&(t=this.maxMoveCount);var n=Math.min(this[_],t),i=Math.max(this[_],t);return this.indexMove=t,this[D].slice(n,i)}},{key:"reset",value:function(){this[D]=[],this[H]=0,this[O]=0,this.indexMove=0,this[F]=0,this.stopTimer()}},{key:"timeDuration",get:function(){var e=Math.floor(this[F]/60),t=this[F]%60;return t<10&&(t="0"+t),e<10&&(e="0"+e),"".concat(e,":").concat(t)}},{key:"indexMove",get:function(){return this[_]},set:function(e){this[_]=e,g.dispatchEvent("indexMoveChangeEvent")}},{key:"maxMoveCount",get:function(){return this[D].length}},{key:"history",get:function(){return this[D]}}]),e}(),K=(Symbol(),Symbol()),Q=Symbol(),U=Symbol(),V=Symbol(),X=Symbol(),Y=function(){function n(e,t){o()(this,n),this[K]=a[0],this[Q]=new T(this[K].mapGrid,e,t),this[X]=new J}return s()(n,[{key:V,value:function(e){var t=this;e.forEach(function(e){t.tileGrid.applyMovement(e),t[U].updateTiles(e)}),this.tileGrid.isGameEnd&&(g.dispatchEvent("gameEndEvent"),this.gameControl.stopTimer())}},{key:"move",value:function(e,t){var n=this.tileGrid.buildMovement(e,t);0<n.length&&!1===this.tileGrid.isGameEnd&&(this.gameControl.saveMove(n),this[V]([n]))}},{key:"playMove",value:function(e){var t=this.gameControl.getMove(e);e<-1&&t.reverse(),this[V](t)}},{key:"restart",value:function(){var e=this[Q].tileGridDimension;this[Q]=new T(this[K].mapGrid,e,e),this.gameControl.reset()}},{key:"selectMap",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;this[K]=a[e],this.restart()}},{key:"setRenderEngine",value:function(e){switch(e){case"divs":break;default:this[U]=new L(this.tileGrid)}}},{key:"createTileMap",value:function(){return this[U].createTileMap()}},{key:"gameControl",get:function(){return this[X]}},{key:"tileGrid",get:function(){return this[Q]}}]),n}(),Z=document.getElementById("gridRenderingEnginesId"),$=Z.getElementsByTagName("button"),ee=document.getElementById("gameContainerId"),te=document.getElementById("renderContainerId"),ne=document.getElementById("renderEngineId"),ie=document.getElementById("levelSelectId"),oe=document.getElementById("movesHistoryButtonsId").getElementsByTagName("button"),re=document.getElementById("restartButtonId"),se=document.getElementById("movementIndexId"),ae=document.getElementById("timeId"),ue=(document.documentElement.clientHeight,window.innerHeight||0),le=te.clientWidth,he="table",ce=new Y(le,ue);fe(he),ie.addEventListener("change",function(){ce.selectMap(ie.value),fe(he)});for(var me=function(t){$[t].addEventListener("click",function(){var e=$[t].getAttribute("toggle-rendering");e!==he&&(Z.querySelector('[toggle-rendering="'.concat(he,'"]')).classList.remove("active"),$[t].classList.add("active"),he=e,ce.setRenderEngine(he))})},de=0;de<$.length;de++)me(de);var ve=function(t){oe[t].addEventListener("click",function(){var e=oe[t].getAttribute("move-amount");ce.playMove(parseInt(e)),se.innerText=ce.gameControl.indexMove})};for(de=0;de<oe.length;de++)ve(de);function fe(e){ce.setRenderEngine(e),ne.innerHTML="";var t=ce.createTileMap();ne.appendChild(t),ye()}function ye(){ne.style.width=ce.tileGrid.tileGridDimension+"px"}window.addEventListener("resize",function(){document.documentElement.clientHeight,ue=window.innerHeight||0,le=te.clientWidth,ce.tileGrid.updateTileGridDimension(ue,le),ye()},!0),ee.addEventListener("keydown",function(e){!function(e){switch(e.preventDefault(),e.keyCode){case 37:ce.move(0,-1);break;case 38:ce.move(-1,0);break;case 39:ce.move(0,1);break;case 40:ce.move(1,0)}}(e)}),re.addEventListener("click",function(){ce.restart(),fe(he)}),g.addEventListener("timeChangeEvent",function(){ae.innerText=ce.gameControl.timeDuration}),g.addEventListener("indexMoveChangeEvent",function(){se.innerText=ce.gameControl.indexMove}),window.addEventListener("load",function(){ee.focus(),(new Image).src="./images/correct_box.png"})}]);